

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.png">
  <link rel="icon" href="/img/avatar.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="刻苦学习逆向的小菜鸡。">
  <meta name="author" content="丨S1lenc3丨">
  <meta name="keywords" content="">
  
  <title>Android漏洞挖掘 - S1lenc3的辣鸡场</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"www.s1lenc3.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="S1lenc3的辣鸡场" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>S1lenc3</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Android漏洞挖掘">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-03-15 21:43" pubdate>
        2020年3月15日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      32
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Android漏洞挖掘</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年7月23日 下午
                
              </p>
            
            <div class="markdown-body">
              <p>菜鸡准备开始尝试挖洞了。学习文章：<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/22933619">https://www.zhihu.com/question/22933619</a></p>
<h1 id="AndroidManifest配置相关的详情或漏洞"><a href="#AndroidManifest配置相关的详情或漏洞" class="headerlink" title="AndroidManifest配置相关的详情或漏洞"></a>AndroidManifest配置相关的详情或漏洞</h1><h2 id="程序被任意调试"><a href="#程序被任意调试" class="headerlink" title="程序被任意调试"></a>程序被任意调试</h2><p>详情：AndroidManifest.xml中android:debuggable=”true”。</p>
<p>危害：导致app可以被任意调试</p>
<p>建议：将true改为false即可。</p>
<h2 id="程序数据任意备份"><a href="#程序数据任意备份" class="headerlink" title="程序数据任意备份"></a>程序数据任意备份</h2><p>详情：AndroidManifest.xml中android:allowBackup=”true”。</p>
<p>危害：导致app应用数据可以被备份导出。</p>
<p>建议：将true改为false即可。</p>
<p>组件暴露：建议使用android:protectionLevel=”signature”验证调用来源。</p>
<h2 id="Activity组件暴露"><a href="#Activity组件暴露" class="headerlink" title="Activity组件暴露"></a>Activity组件暴露</h2><p>详情：Activity组件的exported被设置为true，或者未设置exported同时IntentFilter不为空时，可通过设置intent唤起activity。</p>
<p>危害：构造恶意数据对导出的activity进行越权攻击。</p>
<p>建议：exported设置为false，对组件进行权限控制和参数校验</p>
<h2 id="Service组件暴露"><a href="#Service组件暴露" class="headerlink" title="Service组件暴露"></a>Service组件暴露</h2><p>同Activity组件暴露相同。</p>
<h2 id="ContentProvider组件暴露"><a href="#ContentProvider组件暴露" class="headerlink" title="ContentProvider组件暴露"></a>ContentProvider组件暴露</h2><p>详情：exported为true或者api小于等于16.</p>
<p>危害：访问不公开共享的数据或文件。</p>
<p>建议：同上。</p>
<h2 id="BroadcastReceiver组件暴露"><a href="#BroadcastReceiver组件暴露" class="headerlink" title="BroadcastReceiver组件暴露"></a>BroadcastReceiver组件暴露</h2><p>同上。</p>
<h2 id="Intent-Scheme-URLs攻击"><a href="#Intent-Scheme-URLs攻击" class="headerlink" title="Intent Scheme URLs攻击"></a>Intent Scheme URLs攻击</h2><p>详情：在AndroidManifest.xml设置Scheme协议之后，可以通过浏览器打开对应的Activity。</p>
<p>危害：通过访问浏览器构造Intent语法唤醒app相应组件，可能导致拒绝服务甚至越权调用以及提权漏洞。</p>
<p>建议：对数据进行安全检查，配置category filter,添加android.intent.category.BROWSABLE方式规避风险。</p>
<h1 id="WebView组件及服务器通信相关的风险或漏洞"><a href="#WebView组件及服务器通信相关的风险或漏洞" class="headerlink" title="WebView组件及服务器通信相关的风险或漏洞"></a>WebView组件及服务器通信相关的风险或漏洞</h1><h2 id="webview存在本地Java接口"><a href="#webview存在本地Java接口" class="headerlink" title="webview存在本地Java接口"></a>webview存在本地Java接口</h2><p>详情：android的webview组件有一个非常特殊接口函数addJavascriptInterface，能实现本地java与js之间交互。</p>
<p>危害：targetSdkVersion小于17时，利用此接口可以远程执行任意代码。</p>
<p>建议：不使用此接口，使用注入javascript和第三方协议的替代方案。</p>
<h2 id="WebView组件远程代码执行（调用getClassLoader）"><a href="#WebView组件远程代码执行（调用getClassLoader）" class="headerlink" title="WebView组件远程代码执行（调用getClassLoader）"></a>WebView组件远程代码执行（调用getClassLoader）</h2><p>详情：targetSdkVersion小于17时，并在Context子类中使用addJavascriptInterface绑定this对象。</p>
<p>危害：通过调用getClassLoader绕过getClass方法的限制。</p>
<p>建议：targetSdkVersion大于17。</p>
<h2 id="WebView忽略SSL证书错误"><a href="#WebView忽略SSL证书错误" class="headerlink" title="WebView忽略SSL证书错误"></a>WebView忽略SSL证书错误</h2><p>详情：WebView调用onReceivedSslError方法时，直接执行handler.proceed()来忽略该证书错误。</p>
<p>危害：可能引起中间人攻击。</p>
<p>建议：不要重写onReceivedSslError方法，或者对错误进行业务判断。</p>
<h2 id="WebView启用访问文件数据"><a href="#WebView启用访问文件数据" class="headerlink" title="WebView启用访问文件数据"></a>WebView启用访问文件数据</h2><p>详情：setAllowFileAccess(true),可通过webview访问私有目录下的文件数据。</p>
<p>危害：此方法默认为true，绕过同源策略能够对私有目录文件进行访问，导致隐私泄漏。</p>
<p>建议：设置为false，禁止访问私有文件数据。</p>
<h2 id="SSL通信服务端-客户端检测信任任意证书"><a href="#SSL通信服务端-客户端检测信任任意证书" class="headerlink" title="SSL通信服务端/客户端检测信任任意证书"></a>SSL通信服务端/客户端检测信任任意证书</h2><p>详情：自定义SSL x509 TrustManager，重写checkServerTrusted/checkClientTrusted方法，方法内不做任何服务端的证书校验。</p>
<p>危害：中间人攻击。</p>
<p>建议：双端进行严格证书校验。</p>
<h2 id="HTTPS关闭主机名验证"><a href="#HTTPS关闭主机名验证" class="headerlink" title="HTTPS关闭主机名验证"></a>HTTPS关闭主机名验证</h2><p>详情：构造HttpCLient时，HostnameVerifier参数为ALLOW_ALL_HOSTNAME_VERIFIER或空。</p>
<p>危害：中间人攻击。</p>
<p>建议：加密通信被还原为明文通信。</p>
<h2 id="开放socket端口"><a href="#开放socket端口" class="headerlink" title="开放socket端口"></a>开放socket端口</h2><p>详情：App绑定端口进行监听，建立连接后可接收外部发送的数据。</p>
<p>危害：构造恶意数据对端口进行测试，对于绑定了0.0.0.0的app可发起远程攻击。</p>
<p>建议：绑定127.0.0.1，对接受数据进行校验检测。</p>
<h1 id="数据安全风险"><a href="#数据安全风险" class="headerlink" title="数据安全风险"></a>数据安全风险</h1><h2 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h2><h3 id="SD卡数据被第三方程序访问"><a href="#SD卡数据被第三方程序访问" class="headerlink" title="SD卡数据被第三方程序访问"></a>SD卡数据被第三方程序访问</h3><p>详情：存储在SD卡中的内容可以调用getExternalStorageDirectory访问。</p>
<p>建议：存储信息到私有目录，对敏感数据加密。</p>
<h3 id="全局File可读写漏洞-openFileOutput"><a href="#全局File可读写漏洞-openFileOutput" class="headerlink" title="全局File可读写漏洞-openFileOutput"></a>全局File可读写漏洞-openFileOutput</h3><p>详情：openFileOutput方法创建内部文件时，将文件设置了全局的可读权限MODE_WORLD_READABLE/MODE_WORLD_WRITEABLE。。</p>
<p>危害：恶意读取文件内容。</p>
<p>建议：确认是否存在敏感数据，删除全局可读/写属性。</p>
<h2 id="私有文件泄漏风险-getSharedPreferences"><a href="#私有文件泄漏风险-getSharedPreferences" class="headerlink" title="私有文件泄漏风险-getSharedPreferences"></a>私有文件泄漏风险-getSharedPreferences</h2><h3 id="配置文件可读可写"><a href="#配置文件可读可写" class="headerlink" title="配置文件可读可写"></a>配置文件可读可写</h3><p>详情：getSharedPreferences第二个参数为MODE_WORLD_READABLE 或MODE_WORLD_WRITEABLE。</p>
<p>危害：信息泄漏，篡改内容，影响程序正常运行。</p>
<p>建议：参数设置MODE_PRIVATE。禁止使用MODE_WORLD_READABLE ｜MODE_WORLD_WRITEABLE模式。</p>
<h2 id="数据加密"><a href="#数据加密" class="headerlink" title="数据加密"></a>数据加密</h2><h3 id="AES弱加密"><a href="#AES弱加密" class="headerlink" title="AES弱加密"></a>AES弱加密</h3><p>详情：使用“AES/ECB/NoPadding”或“AES/ECB/PKCS5padding”的模式。</p>
<p>危害：破解难度低。</p>
<p>建议：使用cbc或cfb加密模式。</p>
<h3 id="随机数不安全使用"><a href="#随机数不安全使用" class="headerlink" title="随机数不安全使用"></a>随机数不安全使用</h3><p>详情：调用SecureRandom类中的setSeed方法。</p>
<p>危害：生成的随机数具有确定性，存在被破解的可能性。</p>
<p>建议：使用/dev/urandom或/dev/random来初始化伪随机数生成器。</p>
<h3 id="AES-DES硬编码密钥"><a href="#AES-DES硬编码密钥" class="headerlink" title="AES/DES硬编码密钥"></a>AES/DES硬编码密钥</h3><p>详情：加密时采用硬编码在程序中。</p>
<p>危害：通过反编译获取密钥可以轻易揭秘APP通信数据。</p>
<p>建议：密钥加密存储或进行加解密运算。</p>
<h1 id="文件目录遍历类漏洞"><a href="#文件目录遍历类漏洞" class="headerlink" title="文件目录遍历类漏洞"></a>文件目录遍历类漏洞</h1><h2 id="Provider文件目录遍历"><a href="#Provider文件目录遍历" class="headerlink" title="Provider文件目录遍历"></a>Provider文件目录遍历</h2><p>详情：Provider被导出并且覆写了openFile方法，没有对Content Query Uri进行有效判断或过滤。</p>
<p>危害：利用openFile接口进行文件目录遍历，可达到访问任意可读文件的目的。</p>
<p>建议：不覆写openFile方法，对参数进行安全校验。</p>
<h2 id="unzip解压缩漏洞"><a href="#unzip解压缩漏洞" class="headerlink" title="unzip解压缩漏洞"></a>unzip解压缩漏洞</h2><p>详情：解压zip，使用getName获取压缩文件名后未进行校验。</p>
<p>危害：构造恶意zip文件，覆盖相应的的文件导致任意代码执行。</p>
<p>建议：解压文件时，判断是否有../特殊字符。</p>
<h1 id="文件格式解析类漏洞"><a href="#文件格式解析类漏洞" class="headerlink" title="文件格式解析类漏洞"></a>文件格式解析类漏洞</h1><h2 id="FFmpeg文件读取"><a href="#FFmpeg文件读取" class="headerlink" title="FFmpeg文件读取"></a>FFmpeg文件读取</h2><p>详情：使用了低版本的FFmpeg库进行视频解码。</p>
<p>危害：低版本可能存在本地文件读取漏洞，可以通过构造恶意文件获取本地文件内容。</p>
<p>建议：升级最新版。</p>
<h2 id="安卓“Janus”漏洞"><a href="#安卓“Janus”漏洞" class="headerlink" title="安卓“Janus”漏洞"></a>安卓“Janus”漏洞</h2><p>详情：在原始apk前部添加一个恶意的classes.dex文件（A文件），安卓系统在校验时计算了A文件的hash值，并以“classes.dex”为字符串作为key保存，然后计算原本的classes.dex（B文件），同样的key保存，之后将会覆盖A文件的hash值，系统认为apk没有被修改，完成安装，运行apk会优先执行文件A，忽略B。</p>
<p>危害：绕过安卓系统的signature scheme V1签名机制，进而直接对App进行篡改。</p>
<p>建议：禁止安装多个同名apk文件。</p>
<h1 id="内存堆栈类漏洞"><a href="#内存堆栈类漏洞" class="headerlink" title="内存堆栈类漏洞"></a>内存堆栈类漏洞</h1><h2 id="未使用编译器堆栈保护技术"><a href="#未使用编译器堆栈保护技术" class="headerlink" title="未使用编译器堆栈保护技术"></a>未使用编译器堆栈保护技术</h2><p>详情：stack canaries漏洞缓解技术，函数调用时，向栈帧内压入额外的canary随机数，栈溢出时，canary先被覆盖，之后才是ebp和返回地址。函数返回时，会将canary与.data副本的值进行比较，不相同，说明发生了栈溢出。</p>
<p>危害：发生栈溢出时系统不会对程序进行保护。</p>
<p>建议：使用NDK编译so时，在Android.mk文件中添加：LOCAL_CFLAGS := -Wall -O2 -U_FORTIFY_SOURCE -fstack-protector-all</p>
<h2 id="未使用地址空间随机化技术"><a href="#未使用地址空间随机化技术" class="headerlink" title="未使用地址空间随机化技术"></a>未使用地址空间随机化技术</h2><p>详情：PIE，地址随机分配。</p>
<p>危害：shellcode执行难度降低，攻击成功率增加。</p>
<p>建议：NDK编译so时，加入LOCAL_CFLAGS := -fpie -pie开启对PIE的支持。</p>
<h2 id="libupnp栈溢出漏洞"><a href="#libupnp栈溢出漏洞" class="headerlink" title="libupnp栈溢出漏洞"></a>libupnp栈溢出漏洞</h2><p>详情：使用了低于1.6.18版本的libupnp库文件。</p>
<p>危害：代码执行。</p>
<p>建议：升级库到1.6.18版本或以上。</p>
<h1 id="动态类漏洞"><a href="#动态类漏洞" class="headerlink" title="动态类漏洞"></a>动态类漏洞</h1><h2 id="DEX文件动态加载"><a href="#DEX文件动态加载" class="headerlink" title="DEX文件动态加载"></a>DEX文件动态加载</h2><p>详情：使用DEXClassLoader加载外部apk，dex等文件，外部文件无法控制时，无法保证加载的文件是否安全。</p>
<p>危害：加载恶意dex文件会导致任意命令的执行。</p>
<p>建议：加载外部文件前，必须使用校验签名或MD5等方式确认外部文件的安全性。</p>
<h2 id="动态注册广播"><a href="#动态注册广播" class="headerlink" title="动态注册广播"></a>动态注册广播</h2><p>详情：使用registerReceiver动态注册的广播在组件的生命周期里是默认导出的。</p>
<p>危害：拒绝服务、数据泄露、越权调用。</p>
<p>建议：使用带权限检验的registerReceiver API进行动态广播的注册。</p>
<h1 id="校验或限定不严导致的风险或漏洞"><a href="#校验或限定不严导致的风险或漏洞" class="headerlink" title="校验或限定不严导致的风险或漏洞"></a>校验或限定不严导致的风险或漏洞</h1><h2 id="Fragment注入"><a href="#Fragment注入" class="headerlink" title="Fragment注入"></a>Fragment注入</h2><p>详情：通过导出的PreferenceActivity的子类，没有正确处理intent的extra值。</p>
<p>危害：攻击者可绕过限制访问未授权页面。</p>
<p>建议：使用isValidFragment方法中进行fragment名的合法性校验。</p>
<h2 id="隐式意图调用"><a href="#隐式意图调用" class="headerlink" title="隐式意图调用"></a>隐式意图调用</h2><p>详情：封装Intent时采用隐式设置，只设定action，未限定具体的接受对象，导致intent可被其他应用获取并读取其中的数据。</p>
<p>危害：Intent被第三方劫持，导致内部隐私数据泄漏。</p>
<p>建议：改为显示调用。</p>
<h1 id="命令行调用类相关的风险或漏洞"><a href="#命令行调用类相关的风险或漏洞" class="headerlink" title="命令行调用类相关的风险或漏洞"></a>命令行调用类相关的风险或漏洞</h1><h2 id="动态链接库中包含执行命令的函数"><a href="#动态链接库中包含执行命令的函数" class="headerlink" title="动态链接库中包含执行命令的函数"></a>动态链接库中包含执行命令的函数</h2><p>详情：native程序，执行系统命令时，对接收的参数执行命令时没有做过滤或检验。</p>
<p>危害：攻击者传入任意命令，导致命令执行。</p>
<p>建议：对参数进行严格过滤。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h2 id="应用反编译"><a href="#应用反编译" class="headerlink" title="应用反编译"></a>应用反编译</h2><p><strong>漏洞</strong>：APK 包非常容易被反编译成可读文件，稍加修改就能重新打包成新的 APK。<br><strong>利用</strong>：软件破解，内购破解，软件逻辑修改，插入恶意代码，替换广告商 ID。<br><strong>建议</strong>：使用 ProGuard 等工具混淆代码，重要逻辑用 NDK 实现。<br><strong>例子</strong>：反编译重打包 FlappyBird，把广告商 ID 换了，游戏改加插一段恶意代码等等。</p>
<h2 id="数据的存储与传输"><a href="#数据的存储与传输" class="headerlink" title="数据的存储与传输"></a>数据的存储与传输</h2><p><strong>漏洞</strong>：外部存储（SD 卡）上的文件没有权限管理，所有应用都可读可写。开发者把敏感信息明文存在 SD 卡上，或者动态加载的 payload 放在 SD 卡上。<br><strong>利用</strong>：窃取敏感信息，篡改配置文件，修改 payload 逻辑并重打包。<br><strong>建议</strong>：不要把敏感信息放在外部存储上面；在动态加载外部资源的时候验证文件完整性。</p>
<p><strong>漏洞</strong>：使用全局可读写（MODE_WORLD_READABLE，MODE_WORLD_WRITEABLE）的内部存储方式，或明文存储敏感信息（用户账号密码等）。<br><strong>利用</strong>：全局读写敏感信息，或 root 后读取明文信息。<br><strong>建议</strong>：不适用全局可读写的内部存储方式，不明文存储用户账号密码。</p>
<h2 id="密码泄露"><a href="#密码泄露" class="headerlink" title="密码泄露"></a>密码泄露</h2><p><strong>漏洞</strong>：密码明文存储，传输。<br><strong>利用</strong>：</p>
<ul>
<li>root 后可读写内部存储。</li>
<li>SD 卡全局可读写。</li>
<li>公共 WiFi 抓包获取账号密码。</li>
</ul>
<p><strong>建议</strong>：实用成熟的加密方案。不要把密码明文存储在 SD 卡上。</p>
<h2 id="组件暴露-Activity-Service-Broadcast-Receiver-Content-Provider"><a href="#组件暴露-Activity-Service-Broadcast-Receiver-Content-Provider" class="headerlink" title="组件暴露 (Activity, Service, Broadcast Receiver, Content Provider)"></a>组件暴露 (Activity, Service, Broadcast Receiver, Content Provider)</h2><p><strong>漏洞</strong>：</p>
<ul>
<li>组件在被调用时未做验证。</li>
<li>在调用其他组件时未做验证。</li>
</ul>
<p><strong>利用</strong>：</p>
<ul>
<li>调用暴露的组件，达到某种效果，获取某些信息，构造某些数据。（比如：调用暴露的组件发短信、微博等）。</li>
<li>监听暴露组件，读取数据。</li>
</ul>
<p><strong>建议</strong>：验证输入信息、验证组件调用等。android:exported 设置为 false。使用 android:protectionLevel=”signature” 验证调用来源。</p>
<h2 id="WebView"><a href="#WebView" class="headerlink" title="WebView"></a>WebView</h2><p><strong>漏洞</strong>：</p>
<ul>
<li>恶意 App 可以注入 JavaScript 代码进入 WebView 中的网页，网页未作验证。</li>
<li>恶意网页可以执行 JavaScript 反过来调用 App 中注册过的方法，或者使用资源。</li>
</ul>
<p><strong>利用</strong>：</p>
<ul>
<li>恶意程序嵌入 Web App，然后窃取用户信息。</li>
<li>恶意网页远程调用 App 代码。更有甚者，通过 Java Reflection 调用 Runtime 执行任意代码。</li>
</ul>
<p><strong>建议</strong>：不使用 WebView 中的 setJavaScriptEnabled(true)，或者使用时对输入进行验证。</p>
<h2 id="其他漏洞"><a href="#其他漏洞" class="headerlink" title="其他漏洞"></a>其他漏洞</h2><ul>
<li>ROOT 后的手机可以修改 App 的内购，或者安装外挂 App 等。</li>
<li>Logcat 泄露用户敏感信息。</li>
<li>恶意的广告包。</li>
<li>利用 next Intent。</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>Android 应用的漏洞大部分都是因为开发人员没有对输入信息做验证造成的，另外因为 Intent 这种特殊的机制，需要过滤外部的各种恶意行为。再加上 Android 应用市场混乱。所以现在 Android 应用的漏洞，恶意软件，钓鱼等还在不断增多。再加上 root 对于 App 沙箱的破坏，Android 升级的限制。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AC%94%E8%AE%B0/Android%E9%80%86%E5%90%91/">Android逆向</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Android%E9%80%86%E5%90%91/">Android逆向</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/03/16/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">常用命令记录</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/03/14/Android%E8%BD%AF%E4%BB%B6%E7%9A%84%E7%A0%B4%E8%A7%A3%E6%8A%80%E6%9C%AF/">
                        <span class="hidden-mobile">Android软件的破解技术</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
